description: Creates a new BLOG post and validates the response
actors:
  - actor: ACTOR1
    segments:
      - segment: 1
        actions:
          - description: Create a random post ID
            script: var postId = $random(1000, 99999);

          - description: Send a request to create a new blog post
            action: org.getopentest.actions.HttpRequest
            args:
              url: https://jsonplaceholder.typicode.com/posts
              headers:
                Content-Type: application/json
              verb: POST
              body: |
                $json(
                  {
                    id: postId,
                    title: "My first post"
                  }
                )

          - description: Extract the response's status code and body
            script: |
              var statusCode = $output.statusCode;
              var postInfo = $output.body;

          - description: Validate the response status code
            script: |
              if (statusCode != 201) {
                $fail($format(
                  "We expected the status code to be {0} but it was {1}",
                  201,
                  statusCode));
              }
